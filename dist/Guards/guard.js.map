{"version":3,"sources":["../src/Guards/guard.ts"],"names":[],"mappings":";;AAAa,QAAA,QAAQ,GAAY,eAAe,CAAC;AAEpC,QAAA,SAAS,GAAG;IACrB,EAAE,EAAE,MAAM;IACV,GAAG,EAAE,MAAM;CACd,CAAA;AAUD,kBAAe,CAAC,KAAa,EAAsB,EAAE;IACjD,MAAM,CAAC,CAAC,MAAY,EAAE,GAAqB,EAAE,EAAE;QAC3C,IAAI,IAAI,GAAG,MAAM,CAAC,gBAAQ,CAAC,CAAC;QAC5B,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACP,MAAM,CAAC,gBAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;YAClC,IAAI,GAAG,MAAM,CAAC,gBAAQ,CAAC,CAAC;QAC5B,CAAC;QACD,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACrB,CAAC;QAED,MAAM,CAAC,GAAe;YAClB,GAAG;YACH,KAAK;SACR,CAAA;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC,CAAC;AACN,CAAC,CAAA","file":"guard.js","sourcesContent":["export const META_KEY : string = '__$_meta_$___';\n\nexport const DIRECTION = {\n    IN: '__in',\n    OUT: '__in',\n}\n\nexport type GuardMetaData = { direction : string };\nexport type Guard = (model? : any, clientId? : string, metaData? : GuardMetaData) => boolean | Promise<boolean>\n\nexport type GuardMeta = {\n    key : string | symbol,\n    guard : Guard,\n}\n\nexport default (guard : Guard) : PropertyDecorator => {\n    return (target : any, key : string | symbol) => {\n        let meta = target[META_KEY];\n        if(!meta) {\n            target[META_KEY] = { guards: [] };\n            meta = target[META_KEY];\n        }\n        if(!meta.guards) {\n            meta.guards = [];\n        }\n\n        const g : GuardMeta = {\n            key,\n            guard,\n        }\n        meta.guards.push(g);\n    };\n}"]}